(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{112:function(t,e,a){t.exports=a(148)},117:function(t,e,a){},142:function(t,e,a){},148:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(8),o=a.n(s);a(117),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,c,l=a(15),u=a(10),d=a.n(u),m=a(19),f=a(88),p=a.n(f).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"c9a11d0b-1bf4-4a0d-8b85-3f35229d5cc6"}});!function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(i||(i={})),function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={}));var b=function(t,e,a){return p.post("/auth/login",{email:t,password:e,rememberMe:a}).then((function(t){return t.data}))},k=function(){return p.get("/auth/me").then((function(t){return t.data}))},v=function(){return p.delete("/auth/login").then((function(t){return t.data}))},h={getTodoLists:function(){return p.get("todo-lists").then((function(t){return t.data}))},setTodolist:function(t){return p.post("todo-lists",{title:t})},removeTodolist:function(t){return p.delete("todo-lists/".concat(t))},updateTodolist:function(t,e){return p.put("todo-lists/".concat(t),{title:e})},reorderTodolist:function(t,e){return p.put("/todo-lists/".concat(t,"/reorder"),{putAfterItemId:e})},getTasks:function(t){return p.get("todo-lists/".concat(t,"/tasks?count=10&page=1"))},createTask:function(t,e){return p.post("todo-lists/".concat(t,"/tasks"),{title:e})},deleteTask:function(t,e){return p.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},updateTask:function(t,e,a){return p.put("/todo-lists/".concat(t,"/tasks/").concat(e),a)},reorderTask:function(t,e,a){return p.put("/todo-lists/".concat(t,"/tasks/").concat(e),{putAfterItemId:a})}},g=a(30),E=Object(g.b)({name:"login",initialState:{isAuth:!1},reducers:{setIsAuthAC:function(t,e){t.isAuth=e.payload.isAuth}}}),w=E.reducer,y=E.actions.setIsAuthAC,C=w,x=Object(g.b)({name:"app",initialState:{status:"free",error:null,isInitial:!1},reducers:{setStatusAC:function(t,e){t.status=e.payload.status},setErrorAC:function(t,e){t.error=e.payload.error},setIsInitialAC:function(t,e){t.isInitial=e.payload.isInitial}}}),I=x.reducer,j=x.actions,O=j.setStatusAC,T=j.setErrorAC,A=j.setIsInitialAC,S=I,L=a(70),D=function(t,e,a){if(0!==t.resultCode)throw a(O({status:"error"})),a(U({todolistId:e,disabled:!1})),new Error(t.messages[0]);a(M({todolistId:e})),a(O({status:"succeeded"})),a(U({todolistId:e,disabled:!1}))},P=function(t,e,a){e(T(t.toString())),e(U({todolistId:a,disabled:!1})),e(O({status:"error"}))},F=Object(g.b)({name:"todolists",initialState:[],reducers:{RemoveTodolistAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t.splice(a,1)},AddTodolistAC:function(t,e){var a=e.payload.todolist;a.filter="all",t.unshift(a)},ChangeTodolistAC:function(t,e){t.map((function(t){return t.id===e.payload.todolistId&&(t.title=e.payload.title),t}))},changeTodolistFilterAC:function(t,e){t.map((function(t){return t.id===e.payload.id&&(t.filter=e.payload.filter),t}))},setTodolist:function(t,e){return e.payload.todolists.map((function(t){return Object(L.a)(Object(L.a)({},t),{},{filter:"all",disabledStatus:!1})}))},setStatusDisabled:function(t,e){t.map((function(t){return t.id===e.payload.todolistId&&(t.disabledStatus=e.payload.disabled),t}))}}}),N=F.actions,M=N.RemoveTodolistAC,z=N.AddTodolistAC,R=N.ChangeTodolistAC,_=N.changeTodolistFilterAC,B=N.setTodolist,U=N.setStatusDisabled,q=F.reducer,H=Object(g.b)({name:"task",initialState:{},reducers:{removeTaskAC:function(t,e){var a=t[e.payload.todoListId].findIndex((function(t){return t.id===e.payload.taskId}));t[e.payload.todoListId].splice(a,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].push(e.payload.task)},changeTaskAC:function(t,e){t[e.payload.task.todoListId].map((function(t){return t.id===e.payload.task.id&&(t.title=e.payload.task.title,t.status=e.payload.task.status),t}))},changeTaskDisabledAC:function(t,e){t[e.payload.todoListId].map((function(t){return t.id===e.payload.taskId&&(t.disabledStatus=e.payload.disabled),t}))},getTasksAC:function(t,e){t[e.payload.todoListId]=e.payload.tasks}},extraReducers:function(t){t.addCase(z,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(M,(function(t,e){delete t[e.payload.todolistId]})),t.addCase(B,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))}))}}),K=H.reducer,J=H.actions,W=J.removeTaskAC,V=J.addTaskAC,X=J.changeTaskAC,Y=J.changeTaskDisabledAC,$=J.getTasksAC,G=a(23),Q=a(50),Z=Object(G.c)({tasks:K,todolists:q,app:S,login:C}),tt=Object(g.a)({reducer:Z,middleware:function(t){return t().prepend(Q.a)}});window.store=tt;a(142);var et=a(48),at=a(188),nt=a(199),rt=r.a.memo((function(t){var e=Object(n.useState)(""),a=Object(et.a)(e,2),s=a[0],o=a[1],i=Object(n.useState)(null),c=Object(et.a)(i,2),l=c[0],u=c[1],d=function(){var e=s.trim();e?(t.addItems(e),o("")):u("Title is Required")};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(nt.a,{label:"Enter text",error:!!l,className:l?"error":"",value:s,onChange:function(t){o(t.currentTarget.value),l&&u(null)},onKeyPress:function(t){"Enter"===t.key&&d()},helperText:l}),r.a.createElement(at.a,{disabled:t.disabledButton,color:"primary",variant:"contained",size:"small",onClick:d},"+")))})),st=a(193),ot=a(194),it=a(195),ct=a(189),lt=a(150),ut=a(197),dt=a(198),mt=a(190),ft=a(196),pt=a(149),bt=r.a.memo((function(t){var e=Object(n.useState)(!1),a=Object(et.a)(e,2),s=a[0],o=a[1],i=Object(n.useState)(t.title),l=Object(et.a)(i,2),u=l[0],d=l[1];return s?r.a.createElement(nt.a,{value:u,size:"small",onChange:function(t){d(t.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),u.trim()&&t.changeTaskTitle(u.trim())}}):r.a.createElement("span",{onDoubleClick:function(){o(!0)},className:t.status===c.Completed?"is-done":""},t.title)})),kt=a(98),vt=a.n(kt),ht=a(67),gt=a.n(ht),Et=a(201),wt=a(97),yt=a.n(wt),Ct=r.a.memo((function(t){var e=Object(l.b)(),a=Object(n.useCallback)((function(){var a,n;e((a=t.todolistId,n=t.task.id,function(t){t(O({status:"loading"})),t(Y({taskId:n,todoListId:a,disabled:!0})),h.deleteTask(a,n).then((function(e){if(0!==e.data.resultCode)throw t(O({status:"error"})),t(Y({taskId:n,todoListId:a,disabled:!1})),new Error(e.data.messages[0]);t(W({taskId:n,todoListId:a})),t(O({status:"succeeded"})),t(Y({taskId:n,todoListId:a,disabled:!1}))})).catch((function(e){t(T(e.toString())),t(O({status:"error"}))}))}))}),[e,t.task.id,t.todolistId]),s=Object(n.useCallback)((function(a){e(function(t,e,a){return function(){var n=Object(m.a)(d.a.mark((function n(r,s){var o,i,c,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=s().tasks,!(i=o[t].find((function(t){return t.id===e})))){n.next=22;break}return c={title:a,description:i.description,completed:i.completed,status:i.status,priority:i.priority,startDate:i.startDate,deadline:i.deadline},n.prev=4,r(O({status:"loading"})),n.next=8,h.updateTask(i.todoListId,i.id,c);case 8:if(0!==(l=n.sent).data.resultCode){n.next=14;break}r(X({task:l.data.data.item})),r(O({status:"succeeded"})),n.next=16;break;case 14:throw r(O({status:"error"})),new Error(l.data.messages[0]);case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(4),r(T(n.t0.toString())),r(O({status:"error"}));case 22:case"end":return n.stop()}}),n,null,[[4,18]])})));return function(t,e){return n.apply(this,arguments)}}()}(t.todolistId,t.task.id,a))}),[e,t.task.id,t.todolistId]),o=Object(n.useCallback)((function(a){var n,r,s;e((n=t.todolistId,r=t.task.id,s=a.currentTarget.checked?2:0,function(){var t=Object(m.a)(d.a.mark((function t(e,a){var o,i,c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a().tasks,!(i=o[n].find((function(t){return t.id===r})))){t.next=22;break}return c={title:i.title,description:i.description,completed:i.completed,status:s,priority:i.priority,startDate:i.startDate,deadline:i.deadline},t.prev=4,e(O({status:"loading"})),t.next=8,h.updateTask(i.todoListId,i.id,c);case 8:if(0!==(l=t.sent).data.resultCode){t.next=14;break}e(X({task:l.data.data.item})),e(O({status:"succeeded"})),t.next=16;break;case 14:throw e(O({status:"error"})),new Error(l.data.messages[0]);case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(4),e(T(t.t0.toString())),e(O({status:"error"}));case 22:case"end":return t.stop()}}),t,null,[[4,18]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[e,t.task.id,t.todolistId]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Et.a,{color:"primary",onChange:o,checked:0!==t.task.status}),r.a.createElement(bt,{title:t.task.title,changeTaskTitle:s,status:t.task.status}),r.a.createElement("span",null,r.a.createElement(ct.a,{onClick:a,disabled:t.task.disabledStatus},r.a.createElement(yt.a,null)))))})),xt=r.a.memo((function(t){var e=t.todolist,a=Object(l.c)((function(t){return t.tasks})),s=Object(l.c)((function(t){return t.login.isAuth})),o=Object(l.b)();Object(n.useEffect)((function(){var t;o((t=e.id,function(){var e=Object(m.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(O({status:"loading"})),e.next=4,h.getTasks(t);case 4:if(n=e.sent,e.prev=5,n.data.error){e.next=12;break}a($({todoListId:t,tasks:n.data.items})),a(O({status:"succeeded"})),e.next=14;break;case 12:throw new Error("Some Error");case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(5),a(O({status:"error"})),a(T(e.t0));case 21:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}()))}),[o,e.id,s]);var i=a[e.id];"active"===e.filter&&(i=a[e.id].filter((function(t){return t.status===c.New}))),"completed"===e.filter&&(i=a[e.id].filter((function(t){return t.status===c.Completed})));var u=Object(n.useCallback)((function(){o(_({id:e.id,filter:"all"}))}),[o,e.id]),f=Object(n.useCallback)((function(){o(_({id:e.id,filter:"active"}))}),[o,e.id]),p=Object(n.useCallback)((function(){o(_({id:e.id,filter:"completed"}))}),[o,e.id]),b=Object(n.useCallback)((function(t){o(function(t,e){return function(){var a=Object(m.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(O({status:"loading"})),a.next=4,h.createTask(t,e);case 4:if(0!==(r=a.sent).data.resultCode){a.next=10;break}n(V({task:r.data.data.item})),n(O({status:"succeeded"})),a.next=12;break;case 10:throw n(O({status:"error"})),new Error(r.data.messages[0]);case 12:a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),n(T(a.t0.toString())),n(O({status:"error"}));case 18:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(t){return a.apply(this,arguments)}}()}(e.id,t))}),[o,e.id]),k=Object(n.useCallback)((function(t){o(function(t,e){return function(){var a=Object(m.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(O({status:"loading"})),a.next=4,h.updateTodolist(t,e);case 4:if(0!==(r=a.sent).data.resultCode){a.next=10;break}n(O({status:"succeeded"})),n(R({todolistId:t,title:e})),a.next=12;break;case 10:throw n(O({status:"error"})),new Error(r.data.messages[0]);case 12:a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),n(O({status:"error"})),n(T(a.t0.toString()));case 18:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(t){return a.apply(this,arguments)}}()}(e.id,t))}),[o,e.id]);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:gt.a.delete},r.a.createElement(ct.a,{disabled:e.disabledStatus,onClick:function(){return o((t=e.id,function(){var e=Object(m.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(O({status:"loading"})),a(U({todolistId:t,disabled:!0})),e.next=5,h.removeTodolist(t);case 5:n=e.sent,D(n.data,t,a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),P(e.t0,a,t);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));var t}},r.a.createElement(vt.a,null))),r.a.createElement("h3",{className:gt.a.test,style:{textAlign:"center"}},r.a.createElement(bt,{title:e.title,changeTaskTitle:k})),r.a.createElement(rt,{addItems:b,disabledButton:e.disabledStatus}),i.map((function(t){return r.a.createElement(Ct,{todolistId:e.id,task:t,key:t.id})})),r.a.createElement("div",null,r.a.createElement(at.a,{size:"small",color:"default",variant:"all"===e.filter?"outlined":"text",onClick:u},"All"),r.a.createElement(at.a,{color:"primary",size:"small",variant:"active"===e.filter?"outlined":"text",onClick:f},"Active"),r.a.createElement(at.a,{color:"secondary",size:"small",variant:"completed"===e.filter?"outlined":"text",onClick:p},"Completed"))))})),It=function(){var t=Object(l.c)((function(t){return t.todolists}));return r.a.createElement(r.a.Fragment,null,t.map((function(t){return r.a.createElement(mt.a,{style:{padding:"10px"},key:t.id,item:!0,xs:3},r.a.createElement(pt.a,{elevation:5,style:{padding:"10px"}},r.a.createElement(xt,{todolist:t})))})))},jt=a(203),Ot=a(200);function Tt(t){return r.a.createElement(Ot.a,Object.assign({elevation:6,variant:"filled"},t))}function At(){var t=Object(l.c)((function(t){return t.app.error})),e=Object(l.b)(),a=function(t,a){"clickaway"!==a&&e(T({error:null}))};return r.a.createElement(jt.a,{open:null!==t,autoHideDuration:4e3,onClose:a},r.a.createElement(Tt,{onClose:a,severity:"error"},t))}var St=a(186),Lt=a(187),Dt=a(191),Pt=a(192),Ft=a(101),Nt=a(14),Mt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.login.isAuth})),a=Object(Ft.a)({validate:function(t){return t.email?t.password?t.password.length<3?{password:"Must be more 3 characters"}:void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){t(function(t){return function(){var e=Object(m.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(O({status:"loading"})),e.next=4,b(t.email,t.password,t.rememberMe);case 4:0===(n=e.sent).resultCode?(a(O({status:"succeeded"})),a(y({isAuth:!0}))):(a(O({status:"error"})),a(T({error:n.messages[0]}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),a(O({status:"error"})),a(T(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}(e)),console.log(e)}});return e?r.a.createElement(Nt.a,{to:"/ToDoList"}):r.a.createElement(mt.a,{container:!0,justify:"center"},r.a.createElement(mt.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement(St.a,null,r.a.createElement(Lt.a,null,r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(Dt.a,null,r.a.createElement(nt.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?r.a.createElement("div",{style:{color:"red"}},a.errors.email):null,r.a.createElement(nt.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.email&&a.errors.password?r.a.createElement("div",{style:{color:"red"}},a.errors.password):null,r.a.createElement(Pt.a,Object.assign({label:"Remember me",control:r.a.createElement(Et.a,null)},a.getFieldProps("rememberMe"))),r.a.createElement(at.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},zt=r.a.memo((function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.app.status})),a=Object(l.c)((function(t){return t.app.isInitial})),s=Object(l.c)((function(t){return t.login.isAuth})),o=Object(n.useCallback)((function(e){var a;t((a=e,function(){var t=Object(m.a)(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(O({status:"loading"})),t.next=4,h.setTodolist(a);case 4:if(0!==(n=t.sent).data.resultCode){t.next=10;break}e(z({todolist:n.data.data.item})),e(O({status:"succeeded"})),t.next=12;break;case 10:throw e(O({status:"error"})),new Error(n.data.messages[0]);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),e(O({status:"error"})),e(T(t.t0.toString()));case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()))}),[t]);return Object(n.useEffect)((function(){t(function(){var t=Object(m.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(O({status:"loading"})),t.next=4,k();case 4:0===(a=t.sent).resultCode?(e(O({status:"succeeded"})),e(y({isAuth:!0}))):(e(O({status:"error"})),e(T({error:a.messages[0]}))),e(A({isInitial:!0})),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),e(O({status:"error"})),e(T(t.t0.toString())),e(A({isInitial:!0}));case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),t(function(){var t=Object(m.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(O({status:"loading"})),t.next=3,h.getTodoLists();case 3:a=t.sent,e(B({todolists:a})),e(O({status:"succeeded"}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t,s]),a?r.a.createElement("div",null,r.a.createElement(ot.a,{position:"static"},r.a.createElement(it.a,null,r.a.createElement(ct.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(ft.a,null)),r.a.createElement(lt.a,{variant:"h6"},"News"),s?r.a.createElement(at.a,{onClick:function(){t(function(){var t=Object(m.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(O({status:"loading"})),t.next=4,v();case 4:0===(a=t.sent).resultCode?(e(O({status:"succeeded"})),e(y({isAuth:!1}))):(e(O({status:"error"})),e(T({error:a.messages[0]}))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e(O({status:"error"})),e(T(t.t0.toString()));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())},color:"inherit"},"Log Out"):null)),"loading"===e?r.a.createElement(ut.a,null):"",r.a.createElement(dt.a,null,r.a.createElement(mt.a,{container:!0}," ",r.a.createElement(rt,{addItems:o})),r.a.createElement(mt.a,{container:!0},s?r.a.createElement(It,null):r.a.createElement(Nt.a,{to:"/login"}),r.a.createElement(Nt.b,{exact:!0,path:"/",render:function(){return r.a.createElement(zt,null)}}),r.a.createElement(Nt.b,{path:"/login",render:function(){return r.a.createElement(Mt,null)}})),r.a.createElement(At,null))):r.a.createElement("div",{style:{position:"fixed",top:"50%",textAlign:"center",width:"100%"}},r.a.createElement(st.a,null))})),Rt=zt,_t=a(55);o.a.render(r.a.createElement(l.a,{store:tt},r.a.createElement(_t.a,null,r.a.createElement(Rt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},67:function(t,e,a){t.exports={delete:"todolist_delete__3KUky",test:"todolist_test__2Xzk0"}}},[[112,1,2]]]);
//# sourceMappingURL=main.13d2adb9.chunk.js.map